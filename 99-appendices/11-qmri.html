
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://bids-specification.readthedocs.io/en/stable/99-appendices/11-qmri.html">
      
      <link rel="icon" href="../images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.8">
    
    
      
        <title>Quantitative MRI - Brain Imaging Data Structure v1.6.1-dev</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.92558b1b.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#appendix-xi-quantitative-mri" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Brain Imaging Data Structure v1.6.1-dev" class="md-header__button md-logo" aria-label="Brain Imaging Data Structure v1.6.1-dev" data-md-component="logo">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Brain Imaging Data Structure v1.6.1-dev
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Quantitative MRI
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Brain Imaging Data Structure v1.6.1-dev" class="md-nav__button md-logo" aria-label="Brain Imaging Data Structure v1.6.1-dev" data-md-component="logo">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    Brain Imaging Data Structure v1.6.1-dev
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      <label class="md-nav__link" for="__nav_1">
        The BIDS Specification
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="The BIDS Specification" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          The BIDS Specification
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../01-introduction.html" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../02-common-principles.html" class="md-nav__link">
        Common principles
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../03-modality-agnostic-files.html" class="md-nav__link">
        Modality agnostic files
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4" type="checkbox" id="__nav_1_4" >
      
      <label class="md-nav__link" for="__nav_1_4">
        Modality specific files
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Modality specific files" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_4">
          <span class="md-nav__icon md-icon"></span>
          Modality specific files
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../04-modality-specific-files/01-magnetic-resonance-imaging-data.html" class="md-nav__link">
        Magnetic Resonance Imaging
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../04-modality-specific-files/02-magnetoencephalography.html" class="md-nav__link">
        Magnetoencephalography
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../04-modality-specific-files/03-electroencephalography.html" class="md-nav__link">
        Electroencephalography
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../04-modality-specific-files/04-intracranial-electroencephalography.html" class="md-nav__link">
        Intracranial Electroencephalography
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../04-modality-specific-files/05-task-events.html" class="md-nav__link">
        Task events
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../04-modality-specific-files/06-physiological-and-other-continuous-recordings.html" class="md-nav__link">
        Physiological and other continuous recordings
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../04-modality-specific-files/07-behavioral-experiments.html" class="md-nav__link">
        Behavioral experiments (with no neural recordings)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../04-modality-specific-files/08-genetic-descriptor.html" class="md-nav__link">
        Genetic Descriptor
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../04-modality-specific-files/09-positron-emission-tomography.html" class="md-nav__link">
        Positron Emission Tomography
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_5" type="checkbox" id="__nav_1_5" >
      
      <label class="md-nav__link" for="__nav_1_5">
        Derivatives
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Derivatives" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_5">
          <span class="md-nav__icon md-icon"></span>
          Derivatives
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../05-derivatives/01-introduction.html" class="md-nav__link">
        BIDS Derivatives
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../05-derivatives/02-common-data-types.html" class="md-nav__link">
        Common data types and metadata
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../05-derivatives/03-imaging.html" class="md-nav__link">
        Imaging data types
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../06-longitudinal-and-multi-site-studies.html" class="md-nav__link">
        Longitudinal and multi-site studies
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../07-extensions.html" class="md-nav__link">
        BIDS Extension Proposals
      </a>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_8" type="checkbox" id="__nav_1_8" checked>
      
      <label class="md-nav__link" for="__nav_1_8">
        Appendix
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Appendix" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_8">
          <span class="md-nav__icon md-icon"></span>
          Appendix
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="01-contributors.html" class="md-nav__link">
        Contributors
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="02-licenses.html" class="md-nav__link">
        Licenses
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="03-hed.html" class="md-nav__link">
        Hierarchical Event Descriptors
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="04-entity-table.html" class="md-nav__link">
        Entity table
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="05-units.html" class="md-nav__link">
        Units
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="06-meg-file-formats.html" class="md-nav__link">
        MEG file formats
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="07-meg-systems.html" class="md-nav__link">
        MEG systems
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="08-coordinate-systems.html" class="md-nav__link">
        Coordinate systems
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="09-entities.html" class="md-nav__link">
        Entities
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="10-file-collections.html" class="md-nav__link">
        File collections
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Quantitative MRI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="11-qmri.html" class="md-nav__link md-nav__link--active">
        Quantitative MRI
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#organization-of-qmri-data-in-bids" class="md-nav__link">
    Organization of qMRI data in BIDS
  </a>
  
    <nav class="md-nav" aria-label="Organization of qMRI data in BIDS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inputs-are-file-collections" class="md-nav__link">
    Inputs are file collections
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quantitative-maps-are-derivatives" class="md-nav__link">
    Quantitative maps are derivatives
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-datasets" class="md-nav__link">
    Example datasets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metadata-requirements-for-qmri-data" class="md-nav__link">
    Metadata requirements for qMRI data
  </a>
  
    <nav class="md-nav" aria-label="Metadata requirements for qMRI data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#method-specific-priority-levels-for-qmri-file-collections" class="md-nav__link">
    Method-specific priority levels for qMRI file collections
  </a>
  
    <nav class="md-nav" aria-label="Method-specific priority levels for qMRI file collections">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anatomy-imaging-data" class="md-nav__link">
    Anatomy imaging data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#field-maps" class="md-nav__link">
    Field maps
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metadata-requirements-for-qmri-maps" class="md-nav__link">
    Metadata requirements for qMRI maps
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriving-the-intended-qmri-application-from-an-ambiguous-file-collection" class="md-nav__link">
    Deriving the intended qMRI application from an ambiguous file collection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introducing-a-new-qmri-file-collection" class="md-nav__link">
    Introducing a new qMRI file collection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-specific-notes-for-qmri-file-collections" class="md-nav__link">
    Application-specific notes for qMRI file collections
  </a>
  
    <nav class="md-nav" aria-label="Application-specific notes for qMRI file collections">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anatomy-imaging-data_1" class="md-nav__link">
    Anatomy imaging data
  </a>
  
    <nav class="md-nav" aria-label="Anatomy imaging data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mp2rage-specific-notes" class="md-nav__link">
    MP2RAGE specific notes
  </a>
  
    <nav class="md-nav" aria-label="MP2RAGE specific notes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unit1-images" class="md-nav__link">
    UNIT1 images
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#numbershots-metadata-field" class="md-nav__link">
    NumberShots metadata field
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-metadata-fields" class="md-nav__link">
    Other metadata fields
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tb1srge-specific-notes" class="md-nav__link">
    TB1SRGE specific notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#radiofrequency-rf-field-mapping" class="md-nav__link">
    Radiofrequency (RF) field mapping
  </a>
  
    <nav class="md-nav" aria-label="Radiofrequency (RF) field mapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tb1epi-specific-notes" class="md-nav__link">
    TB1EPI specific notes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tb1afi-specific-notes" class="md-nav__link">
    TB1AFI specific notes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tb1tfl-and-tb1rfm-specific-notes" class="md-nav__link">
    TB1TFL and TB1RFM specific notes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rb1cor-specific-notes" class="md-nav__link">
    RB1COR specific notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="12-arterial-spin-labeling.html" class="md-nav__link">
        Arterial Spin Labeling
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="13-cross-modality-correspondence.html" class="md-nav__link">
        Cross modality correspondence
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CHANGES.html" class="md-nav__link">
        Changelog
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        The BIDS Starter Kit
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="The BIDS Starter Kit" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          The BIDS Starter Kit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/bids-standard/bids-starter-kit" class="md-nav__link">
        GitHub repository
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/bids-standard/bids-starter-kit/wiki/Tutorials" class="md-nav__link">
        Tutorials
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/bids-standard/bids-starter-kit/wiki" class="md-nav__link">
        Wiki
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#organization-of-qmri-data-in-bids" class="md-nav__link">
    Organization of qMRI data in BIDS
  </a>
  
    <nav class="md-nav" aria-label="Organization of qMRI data in BIDS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inputs-are-file-collections" class="md-nav__link">
    Inputs are file collections
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quantitative-maps-are-derivatives" class="md-nav__link">
    Quantitative maps are derivatives
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-datasets" class="md-nav__link">
    Example datasets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metadata-requirements-for-qmri-data" class="md-nav__link">
    Metadata requirements for qMRI data
  </a>
  
    <nav class="md-nav" aria-label="Metadata requirements for qMRI data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#method-specific-priority-levels-for-qmri-file-collections" class="md-nav__link">
    Method-specific priority levels for qMRI file collections
  </a>
  
    <nav class="md-nav" aria-label="Method-specific priority levels for qMRI file collections">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anatomy-imaging-data" class="md-nav__link">
    Anatomy imaging data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#field-maps" class="md-nav__link">
    Field maps
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metadata-requirements-for-qmri-maps" class="md-nav__link">
    Metadata requirements for qMRI maps
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deriving-the-intended-qmri-application-from-an-ambiguous-file-collection" class="md-nav__link">
    Deriving the intended qMRI application from an ambiguous file collection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introducing-a-new-qmri-file-collection" class="md-nav__link">
    Introducing a new qMRI file collection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-specific-notes-for-qmri-file-collections" class="md-nav__link">
    Application-specific notes for qMRI file collections
  </a>
  
    <nav class="md-nav" aria-label="Application-specific notes for qMRI file collections">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anatomy-imaging-data_1" class="md-nav__link">
    Anatomy imaging data
  </a>
  
    <nav class="md-nav" aria-label="Anatomy imaging data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mp2rage-specific-notes" class="md-nav__link">
    MP2RAGE specific notes
  </a>
  
    <nav class="md-nav" aria-label="MP2RAGE specific notes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unit1-images" class="md-nav__link">
    UNIT1 images
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#numbershots-metadata-field" class="md-nav__link">
    NumberShots metadata field
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-metadata-fields" class="md-nav__link">
    Other metadata fields
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tb1srge-specific-notes" class="md-nav__link">
    TB1SRGE specific notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#radiofrequency-rf-field-mapping" class="md-nav__link">
    Radiofrequency (RF) field mapping
  </a>
  
    <nav class="md-nav" aria-label="Radiofrequency (RF) field mapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tb1epi-specific-notes" class="md-nav__link">
    TB1EPI specific notes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tb1afi-specific-notes" class="md-nav__link">
    TB1AFI specific notes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tb1tfl-and-tb1rfm-specific-notes" class="md-nav__link">
    TB1TFL and TB1RFM specific notes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rb1cor-specific-notes" class="md-nav__link">
    RB1COR specific notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="appendix-xi-quantitative-mri"><a class="toclink" href="#appendix-xi-quantitative-mri">Appendix XI: Quantitative MRI</a></h1>
<p>Quantitative MRI (qMRI) is a collection of methods aiming at generating parametric maps
that can characterize underlying tissue properties.
Unlike those of conventional MR images (for example, <code>T1w</code> or <code>T2w</code>),
intensity values of quantitative maps are not represented in an arbitrary range.
Instead, these maps are represented either in absolute physical units
(for example, <code>seconds</code> for <code>T1map</code>),
or within an application dependent range of arbitrary units
(for example, myelin water fraction <code>MWFmap</code> in brain).</p>
<h2 id="organization-of-qmri-data-in-bids"><a class="toclink" href="#organization-of-qmri-data-in-bids">Organization of qMRI data in BIDS</a></h2>
<p>Unlike conventional MR images, quantitative maps are not immediate products of the image reconstruction step
(from k-space data to structural images).
Intensity values of qMRI maps are calculated by fitting a collection of parametrically
linked images to a biophysical model or to an MRI signal representation.
This processing is typically carried out in the image domain.
There are two main ways to obtain a quantitative map:</p>
<ol>
<li>
<p>Pre-generated qMRI maps: The qMRI maps are generated right after the reconstruction
    of required input images and made available to the user at the scanner console.
    The acquisition scenarios may include (a) vendor pipelines or (b) open-source pipelines
    deployed at the scanner site.</p>
</li>
<li>
<p>Post-generated qMRI maps: The qMRI maps are generated from a collection of input
    data after they are exported from the scanner site.
    This type of processing is commonly carried out using an open-source software such as
    <a href="https://github.com/hMRI-group/hMRI-toolbox">hMRI toolbox</a>,
    <a href="https://github.com/mezera/mrQ">mrQ</a>,
    <a href="https://github.com/IMTtugraz/PyQMRI">PyQMRI</a>,
    <a href="https://www.medphysics.wisc.edu/~samsonov/qmap/doc/qmap.html">qmap</a>,
    <a href="https://github.com/qmrlab/qmrlab">qMRLab</a>,
    and <a href="https://github.com/spinicist/QUIT">QUIT</a>.</p>
</li>
</ol>
<h3 id="inputs-are-file-collections"><a class="toclink" href="#inputs-are-file-collections">Inputs are file collections</a></h3>
<p>The common concept of <a href="../02-common-principles.html#entity-linked-file-collections">entity-linked file collections</a> enables the description of a qMRI
application by creating logical groups of input files through <code>suffix</code> and certain entities
representing acquisition parameters (<code>echo</code>, <code>flip</code>, <code>inv</code>, <code>mt</code>) or file parts (<code>part</code>).</p>
<p>If a qMRI file collection is intended for creating structural quantitative maps (for example, <code>T1map</code>),
files belonging to that collection are stored in the <code>anat</code> subfolder.
Below is an example file collection for <code>MP2RAGE</code>:</p>
<div class="highlight"><pre><span></span><code>└─ sub-01/
   └─ anat/
      ├─ sub-01_inv-1_part-mag_MP2RAGE.nii.gz 
      ├─ sub-01_inv-1_part-phase_MP2RAGE.nii.gz 
      ├─ sub-01_inv-1_MP2RAGE.json 
      ├─ sub-01_inv-2_part-mag_MP2RAGE.nii.gz 
      ├─ sub-01_inv-2_part-phase_MP2RAGE.nii.gz 
      └─ sub-01_inv-2_MP2RAGE.json 
</code></pre></div>
<p>Commonly, RF fieldmaps (<code>B1+</code> and <code>B1-</code> maps) are used for the correction of structural quantitative maps.
As these images do not convey substantial structural information,
respective file collections of RF fieldmaps are stored in the <code>fmap</code> subfolder.
Below is an example file collection for RF transmit field map <code>TB1EPI</code>:</p>
<div class="highlight"><pre><span></span><code>└─ sub-01/
   └─ fmap/
      ├─ sub-01_echo-1_flip-1_TB1EPI.nii.gz 
      ├─ sub-01_echo-1_flip-1_TB1EPI.json 
      ├─ sub-01_echo-2_flip-1_TB1EPI.nii.gz 
      ├─ sub-01_echo-2_flip-1_TB1EPI.json 
      ├─ sub-01_echo-1_flip-2_TB1EPI.nii.gz 
      ├─ sub-01_echo-1_flip-2_TB1EPI.json 
      ├─ sub-01_echo-2_flip-2_TB1EPI.nii.gz 
      └─ sub-01_echo-2_flip-2_TB1EPI.json 
</code></pre></div>
<p>Please visit the <a href="10-file-collections.html#magnetic-resonance-imaging">file collections appendix</a> to see the list of currently supported qMRI applications.</p>
<h3 id="quantitative-maps-are-derivatives"><a class="toclink" href="#quantitative-maps-are-derivatives">Quantitative maps are derivatives</a></h3>
<p>Regardless of how they are obtained (pre- or post-generated), qMRI maps are stored in the <code>derivatives</code> folder.
For example a <code>T1map</code> can be generated from an <code>MP2RAGE</code> file collection using either options.</p>
<p>If the map is post-generated:</p>
<div class="highlight"><pre><span></span><code>└─ ds-example/
   └─ derivatives/
      └─ qMRI-software-name/
         └─ sub-01/
            └─ anat/
               ├─ sub-01_T1map.nii.gz 
               ├─ sub-01_T1map.json 
               ├─ sub-01_UNIT1.nii.gz 
               └─ sub-01_UNIT1.json 
</code></pre></div>
<p>If the map is pre-generated, for example, by a Siemens scanner:</p>
<div class="highlight"><pre><span></span><code>└─ ds-example/
   └─ derivatives/
      └─ Siemens/
         └─ sub-01/
            └─ anat/
               ├─ sub-01_T1map.nii.gz 
               ├─ sub-01_T1map.json 
               ├─ sub-01_UNIT1.nii.gz 
               └─ sub-01_UNIT1.json 
</code></pre></div>
<p>Note: Even though the process from which pre-generated qMRI maps are obtained (vendor pipelines) is not known,
vendors generally allow exporting of the corresponding input data.
It is RECOMMENDED to share them along with the vendor outputs, whenever possible for a qMRI method supported by BIDS.</p>
<h3 id="example-datasets"><a class="toclink" href="#example-datasets">Example datasets</a></h3>
<p>You can find example file collections and qMRI maps organized according to BIDS at <a href="https://osf.io/k4bs5/">https://osf.io/k4bs5/</a>.</p>
<h2 id="metadata-requirements-for-qmri-data"><a class="toclink" href="#metadata-requirements-for-qmri-data">Metadata requirements for qMRI data</a></h2>
<p>The table of required entities for qMRI file collections are provided in the <a href="04-entity-table.html">entity table</a>.
However, viability of a qMRI file collection is determined not only by the naming and organization of the input files,
but also by which metadata fields are provided in accompanying json files.</p>
<h3 id="method-specific-priority-levels-for-qmri-file-collections"><a class="toclink" href="#method-specific-priority-levels-for-qmri-file-collections">Method-specific priority levels for qMRI file collections</a></h3>
<h4 id="anatomy-imaging-data"><a class="toclink" href="#anatomy-imaging-data">Anatomy imaging data</a></h4>
<table>
<thead>
<tr>
<th><strong>File collection</strong></th>
<th><strong>REQUIRED metadata</strong></th>
<th><strong>OPTIONAL metadata</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>VFA</td>
<td><code>FlipAngle</code>, <code>PulseSequenceType</code>, <code>RepetitionTimeExcitation</code></td>
<td><code>SpoilingRFPhaseIncrement</code></td>
</tr>
<tr>
<td>IRT1</td>
<td><code>InversionTime</code></td>
<td></td>
</tr>
<tr>
<td>MP2RAGE<sup>*</sup></td>
<td><code>FlipAngle</code>, <code>InversionTime</code>, <code>RepetitionTimeExcitation</code>, <code>RepetitionTimePreperation</code>, <code>NumberShots</code>,<code>MagneticFieldStrength</code></td>
<td><code>EchoTime</code></td>
</tr>
<tr>
<td>MESE</td>
<td><code>EchoTime</code></td>
<td></td>
</tr>
<tr>
<td>MEGRE</td>
<td><code>EchoTime</code></td>
<td></td>
</tr>
<tr>
<td>MTR</td>
<td><code>MTState</code></td>
<td></td>
</tr>
<tr>
<td>MTS</td>
<td><code>FlipAngle</code>, <code>MTState</code>, <code>RepetitionTimeExcitation</code></td>
<td></td>
</tr>
<tr>
<td>MPM</td>
<td><code>FlipAngle</code>, <code>MTState</code>, <code>RepetitionTimeExcitation</code></td>
<td><code>EchoTime</code></td>
</tr>
</tbody>
</table>
<p><sup>*</sup> Please see MP2RAGE-specific notes for the calculation of <code>NumberShots</code> and regarding the
organization of <code>UNIT1</code> image.</p>
<p>Explanation of the table:</p>
<ul>
<li>
<p>The metadata fields listed in the REQUIRED column are needed to perform a minimum viable qMRI processing for the corresponding <code>file collection</code>.</p>
</li>
<li>
<p>Note that some of the metadata fields may be constant across different files in a file collection,
    yet still required as an input (for example, <code>NumberShots</code> in <code>MP2RAGE</code>).
    Such metadata fields MUST be provided in the accompanying JSON files.</p>
</li>
<li>
<p>The metadata fields listed in the OPTIONAL column can be used to form different flavors of an existing file collection suffix,
    dispensing with the need for introducing a new suffix.
    See <a href="#deriving-the-intended-qmri-application-from-an-ambiguous-file-collection">deriving the intended qMRI application from an ambiguous file collection</a>
    for details.</p>
</li>
</ul>
<h4 id="field-maps"><a class="toclink" href="#field-maps">Field maps</a></h4>
<table>
<thead>
<tr>
<th><strong>File collection</strong></th>
<th><strong>REQUIRED metadata</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>TB1DAM</td>
<td><code>FlipAngle</code></td>
</tr>
<tr>
<td>TB1EPI</td>
<td><code>EchoTime</code>, <code>FlipAngle</code>, <code>TotalReadoutTime</code>, <code>MixingTime</code></td>
</tr>
<tr>
<td>TB1AFI</td>
<td><code>RepetitionTime</code></td>
</tr>
<tr>
<td>TB1TFL</td>
<td></td>
</tr>
<tr>
<td>TB1RFM</td>
<td></td>
</tr>
<tr>
<td>TB1SRGE<sup>*</sup></td>
<td><code>FlipAngle</code>, <code>InversionTime</code>, <code>RepetitionTimeExcitation</code>, <code>RepetitionTimePreperation</code>, <code>NumberShots</code></td>
</tr>
<tr>
<td>RB1COR</td>
<td></td>
</tr>
</tbody>
</table>
<p><sup>*</sup> Please see TB1SRGE-specific notes for the calculation of <code>NumberShots</code>.</p>
<h3 id="metadata-requirements-for-qmri-maps"><a class="toclink" href="#metadata-requirements-for-qmri-maps">Metadata requirements for qMRI maps</a></h3>
<p>As qMRI maps are stored as derivatives, they are subjected to the metadata requirements of
<a href="../03-modality-agnostic-files.html#derived-dataset-and-pipeline-description">derived datasets</a>.</p>
<p>An example <code>dataset_description.json</code> for a qMRI map derivatives folder:</p>
<div class="highlight"><pre><span></span><code>└─ ds-example/
   └─ derivatives/
      └─ qMRLab/
         ├─ dataset_description.json 
         └─ sub-01/
            └─ anat/
               ├─ sub-01_T1map.nii.gz 
               ├─ sub-01_T1map.json 
               ├─ sub-01_M0map.nii.gz 
               └─ sub-01_M0map.json 
</code></pre></div>
<p><code>dataset_description.json</code>:</p>
<div class="highlight"><pre><span></span><code>{
  &quot;Name&quot;: &quot;qMRLab Outputs&quot;,
  &quot;BIDSVersion&quot;: &quot;1.5.0&quot;,
  &quot;DatasetType&quot;: &quot;derivative&quot;,
  &quot;GeneratedBy&quot;: [
    {
      &quot;Name&quot;: &quot;qMRLab&quot;,
      &quot;Version&quot;: &quot;2.4.1&quot;,
      &quot;Container&quot;: {
        &quot;Type&quot;: &quot;docker&quot;,
        &quot;Tag&quot;: &quot;qmrlab/minimal:2.4.1&quot;
        }
    },
    {
      &quot;Name&quot;: &quot;Manual&quot;,
      &quot;Description&quot;: &quot;Generated example T1map outputs&quot;
    }
  ],
  &quot;SourceDatasets&quot;: [
    {
      &quot;DOI&quot;: &quot;DOI 10.17605/OSF.IO/K4BS5&quot;,
      &quot;URL&quot;: &quot;https://osf.io/k4bs5/&quot;,
      &quot;Version&quot;: &quot;1&quot;
    }
  ]
}
</code></pre></div>
<p>In addition to the metadata fields provided in the <code>dataset_description.json</code>,
qMRI maps are RECOMMENDED to be accompanied by sidecar JSON files that contain further information about the quantified maps.
Although this may not be the generic case for common derivative outputs,
a proper interpretation of qMRI maps may critically depend on some metadata fields.
For example, without the information of <code>MagneticFieldStrength</code>, white-matter T1 values in a <code>T1map</code> become elusive.</p>
<ul>
<li>
<p>All the acquisition parameters that are constant across the files in a file collection are RECOMMENDED
    to be added to the sidecar json of the qMRI maps.</p>
</li>
<li>
<p>Relevant acquisition parameters that vary across files in a qMRI file collection are RECOMMENDED
    to be added to the sidecar json of the qMRI map <strong>in array form</strong>.</p>
</li>
<li>
<p>The JSON file accompanying a qMRI map which is obtained by using open-source software is RECOMMENDED
    to include additional metadata fields listed in the following table:</p>
</li>
</ul>
<table>
<thead>
<tr>
<th><strong>Key name</strong></th>
<th><strong>Requirement Level</strong></th>
<th><strong>Data type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>BasedOn</td>
<td>RECOMMENDED</td>
<td><a href="https://www.w3schools.com/js/js_json_datatypes.asp">string</a> or <a href="https://www.w3schools.com/js/js_json_arrays.asp">array</a> of <a href="https://www.w3schools.com/js/js_json_datatypes.asp">strings</a></td>
<td>List of files in a file collection to generate the map. Fieldmaps are also listed, if involved in the processing.</td>
</tr>
<tr>
<td>EstimationReference</td>
<td>RECOMMENDED</td>
<td><a href="https://www.w3schools.com/js/js_json_datatypes.asp">string</a></td>
<td>Reference to the study/studies on which the implementation is based.</td>
</tr>
<tr>
<td>EstimationAlgorithm</td>
<td>RECOMMENDED</td>
<td><a href="https://www.w3schools.com/js/js_json_datatypes.asp">string</a></td>
<td>Type of algorithm used to perform fitting (for example, linear, non-linear, LM and such).</td>
</tr>
<tr>
<td>Units</td>
<td>RECOMMENDED</td>
<td><a href="https://www.w3schools.com/js/js_json_datatypes.asp">string</a></td>
<td>Measurement units for the associated file. SI units in CMIXF formatting are RECOMMENDED (see <a href="/02-common-principles.html#units">Units</a>).</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>sub-01_T1map.nii.gz
sub-01_T1map.json
</code></pre></div>
<p>sub-01_T1map.json:</p>
<div class="highlight"><pre><span></span><code>{

&lt;&lt;Parameter injected by the software/pipeline&gt;&gt;

&quot;BasedOn&quot;:[&quot;anat/sub-01_flip-1_VFA.nii.gz&quot;,
           &quot;anat/sub-01_flip-2_VFA.nii.gz&quot;,
           &quot;anat/sub-01_flip-3_VFA.nii.gz&quot;,
           &quot;anat/sub-01_flip-4_VFA.nii.gz&quot;,
           &quot;fmap/sub-01_TB1map.nii.gz&quot;],
&quot;EstimationPaper&quot;:&quot;Deoni et. al.MRM, 2015&quot;,
&quot;EstimationAlgorithm&quot;:&quot;Linear&quot;,
&quot;Units&quot;: &quot;second&quot;,

&lt;&lt;Parameters that are constant across files in the (parent) file collection&gt;&gt;

&quot;MagneticFieldStrength&quot;: &quot;3&quot;,
&quot;Manufacturer&quot;: &quot;Siemens&quot;,
&quot;ManufacturerModelName&quot;: &quot;TrioTim&quot;,
&quot;InstitutionName&quot;: &quot;xxx&quot;,
&quot;PulseSequenceType&quot;: &quot;SPGR&quot;,
&quot;PulseSequenceDetails&quot;: &quot;Information beyond the sequence type that identifies
 specific pulse sequence used (VB version, if not standard, Siemens WIP XXX
 ersion ### sequence written by xx using a version compiled on mm/dd/yyyy/)&quot;,
&quot;RepetitionTimeExcitation&quot;: &quot;35&quot;,
&quot;EchoTime&quot;: &quot;2.86&quot;,
&quot;SliceThickness&quot;: &quot;5&quot;,

&lt;&lt;Relevant parameters that vary across the linking entity of the (parent) file collection&gt;&gt;

&quot;FlipAngle&quot;: [&quot;5&quot;,&quot;10&quot;,&quot;15&quot;,&quot;20&quot;]

}
</code></pre></div>
<h2 id="deriving-the-intended-qmri-application-from-an-ambiguous-file-collection"><a class="toclink" href="#deriving-the-intended-qmri-application-from-an-ambiguous-file-collection">Deriving the intended qMRI application from an ambiguous file collection</a></h2>
<p>Certain file collection suffixes may refer to a generic data collection regime such as variable flip angle (VFA),
rather than a more specific acquisition, for example, magnetization prepared two gradient echoes (MP2RAGE).
Such generic acquisitions can serve as a basis to derive various qMRI applications by changes to the acquisition sequence
(for example, readout) type or by varying additional scan parameters.</p>
<p>If such an inheritance relationship is applicable between an already existing file collection
and a new qMRI application to be included in the specification,
the inheritor qMRI method is listed in the table below instead of introducing a new file collection suffix.
This approach aims at:</p>
<ul>
<li>preventing the list of available suffixes from over-proliferation,</li>
<li>providing qMRI-focused BIDS applications with a set of meta-data driven rules to infer possible fitting options,</li>
<li>keeping an inheritance track of the qMRI methods described within the specification.</li>
</ul>
<table>
<thead>
<tr>
<th><strong>File-collection suffix</strong></th>
<th><strong>If REQUIRED metadata == Value</strong></th>
<th><strong>OPTIONAL metadata (<code>entity</code>/<code>fixed</code>)</strong></th>
<th><strong>Derived application name (NOT a suffix)</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>VFA</td>
<td><code>PulseSequenceType</code> == <code>SPGR</code></td>
<td></td>
<td>DESPOT1</td>
</tr>
<tr>
<td>VFA</td>
<td><code>PulseSequenceType</code> == <code>SSFP</code></td>
<td><code>SpoilingRFPhaseIncrement</code> (<code>fixed</code>)</td>
<td>DESPOT2</td>
</tr>
<tr>
<td>MP2RAGE</td>
<td></td>
<td><code>EchoTime</code> (<code>echo</code>)</td>
<td>MP2RAGE-ME</td>
</tr>
<tr>
<td>MPM</td>
<td></td>
<td><code>EchoTime</code> (<code>echo</code>)</td>
<td>MPM-ME</td>
</tr>
</tbody>
</table>
<p>In this table, (<code>entity</code>/<code>fixed</code>) denotes whether the OPTIONAL metadata that forms a new
flavor of qMRI application for the respective suffix varies across files of a file collection
(which calls for using a linking entity) or fixed. If former is the case, the entity is to be
added to the files in that file collection. Note that this addition MUST be allowed by the
priority levels given for that suffix in the <a href="04-entity-table.html"><code>entity table</code></a>. If latter (<code>fixed</code>) is the case,
filenames will remain the same; however, the optional metadata (third column) may
define the flavor of the application (fourth column) along with the conditional value of a
required metadata field (second column).</p>
<p>A derived qMRI application becomes available if all the optional metadata fields
listed for the respective file collection suffix are provided for the data. In addition,
conditional rules based on the value of a given required metada field can be set
for the description of a derived qMRI application. Note that the value of this
required metadata is fixed across constituent images of a file collection and defined
in <a href="#method-specific-priority-levels-for-qmri-file-collections">Method-specific priority levels for qMRI file collections</a>.</p>
<p>For example, if the optional metadata field of <code>PulseSequenceType</code> is SPGR
for a collection of anatomical images listed by the <code>VFA</code> suffix, the data
qualifies for <code>DESPOT1</code> T1 fitting. For the same suffix, if the <code>PulseSequenceType</code>
metadata field has the value of <code>SSFP</code>, and the <code>SpoilingRFPhaseIncrement</code> is
provided as a metadata field, then the dataset becomes eligible for <code>DESPOT2</code>
T2 fitting application.</p>
<p>Please note that optional metadata fields listed in the <a href="#deriving-the-intended-qmri-application-from-an-ambiguous-file-collection">deriving the intended qMRI
application from an ambiguous file collection table</a> are included in the optional (third)
column of <a href="#method-specific-priority-levels-for-qmri-file-collections">the priority levels table</a> for the consistency of this appendix.</p>
<h2 id="introducing-a-new-qmri-file-collection"><a class="toclink" href="#introducing-a-new-qmri-file-collection">Introducing a new qMRI file collection</a></h2>
<p>If a qMRI application cannot be interpreted as a subtype of an already existing suffix
of a qMRI-related file collection, we RECOMMEND adhering to the following principles to
introduce a new suffix:</p>
<ul>
<li>
<p>All qMRI-relevant file collection suffixes are capitalized.</p>
</li>
<li>
<p>Unless the pulse sequence is exclusively associated with a specific qMRI application
    (for example, <code>MP2RAGE</code>), sequence names are not used as suffixes.</p>
</li>
<li>
<p>File collection suffixes for qMRI applications attain a clear description of the qMRI method that they relate to in the
    <a href="10-file-collections.html#magnetic-resonance-imaging">file collections appendix</a>.</p>
</li>
<li>
<p>Hyperlinks to example applications and reference method articles are encouraged whenever possible.</p>
</li>
<li>
<p>If it is possible to derive a qMRI application from an already existing file collection suffix
    by defining a set of logical conditions over the metadata fields, the tables of the
    <a href="#deriving-the-intended-qmri-application-from-an-ambiguous-file-collection">deriving the intended qMRI application from an ambiguous file collection</a>
    and the
    <a href="#anatomy-imaging-data">anatomy data priority levels</a>
    sections are extended instead of introducing a new suffix.</p>
</li>
</ul>
<h2 id="application-specific-notes-for-qmri-file-collections"><a class="toclink" href="#application-specific-notes-for-qmri-file-collections">Application-specific notes for qMRI file collections</a></h2>
<h3 id="anatomy-imaging-data_1"><a class="toclink" href="#anatomy-imaging-data_1">Anatomy imaging data</a></h3>
<p>General notes:</p>
<ul>
<li>Some BIDS metadata field values are calculated based on the values of other metadata fields that are not listed as required fields.
    These fields include: <code>NumberShots</code>.
    The calculation of the values may depend on the type of the acquisition.
    These acquisitions include: <code>MP2RAGE</code> and <code>TB1SRGE</code>.</li>
</ul>
<h4 id="mp2rage-specific-notes"><a class="toclink" href="#mp2rage-specific-notes"><code>MP2RAGE</code> specific notes</a></h4>
<h5 id="unit1-images"><a class="toclink" href="#unit1-images"><code>UNIT1</code> images</a></h5>
<p>Although the <code>UNIT1</code> image is provided as an output by the acquisition sequence, it is used
as an input to offline calculation of a <code>T1map</code> using a dictionary lookup approach. However,
<code>complex</code> data is needed for an accurate calculation of the <code>UNIT1</code> image, which is not commonly
provided by the stock sequence. Instead, the <code>magnitude</code> and <code>phase</code> images are exported. Please
see the relevant discussion at <a href="https://github.com/qMRLab/qMRLab/issues/255">qMRLab issue #255</a>.</p>
<p>Therefore, the <code>UNIT1</code> image provided by the scanner is RECOMMENDED to be stored under the <code>anat</code>
raw dataset directory along with the <code>MP2RAGE</code> file collection and to be used as the primary input
for quantifying a <code>T1map</code>.</p>
<p>If an additional <code>UNIT1</code> image is calculated offline, then the output is to be stored in the
<code>derivatives</code> folder with necessary provenance information.</p>
<h5 id="numbershots-metadata-field"><a class="toclink" href="#numbershots-metadata-field"><code>NumberShots</code> metadata field</a></h5>
<p>Note that the type of <code>NumberShots</code> field can be either a <code>number</code> or an <code>array of numbers</code>.</p>
<ul>
<li>
<p>If a single <code>number</code> is provided, this should correspond to the number of <code>SlicesPerSlab</code> or <code>ReconMatrixPE</code>.
    However, in this case, <code>SlicePartialFourier</code> or <code>PartialFourierPE</code> fraction is needed
    to calculate the number of partitions <code>before</code> and <code>after</code> of the k-space center to calculate a T1 map.</p>
</li>
<li>
<p>If <code>before/after</code> calculation is performed during the BIDS conversion of the <code>MP2RAGE</code> data,
    then the value of <code>NumberShots</code> metadata field can be given as a 1X2 array,
    with first entry corresponding to <code>before</code> and the second to the <code>after</code>.</p>
</li>
</ul>
<p>Formula:</p>
<p>If NumberShots is an array of numbers such that <code>"NumberShots": [before, after]</code>,
the values of <code>before</code> and <code>after</code> are calculated as follows:</p>
<div class="highlight"><pre><span></span><code>before = SlicesPerSlab*(SlicePartialFourier - 0.5)
after  = SlicesPerSlab/2
</code></pre></div>
<p>See this <a href="https://github.com/JosePMarques/MP2RAGE-related-scripts/blob/a405df30ac2c617d29d8b1b16025aaa911e86370/func/bids_T1B1correct.m#L16">reference implementation</a>.</p>
<h5 id="other-metadata-fields"><a class="toclink" href="#other-metadata-fields">Other metadata fields</a></h5>
<p>The value of the <code>RepetitionTimeExcitation</code> field is not commonly found in the DICOM files.
When accessible, the value of <code>EchoSpacing</code> corresponds to this metadata.
When not accessible, <code>2 X EchoTime</code> can be used as a surrogate.</p>
<p>Further information about other <code>MP2RAGE</code> qMRI protocol fields can be found in the
<a href="https://qmrlab.readthedocs.io/en/master/protocols.html#mp2rage">qMRLab documentation</a>.</p>
<h4 id="tb1srge-specific-notes"><a class="toclink" href="#tb1srge-specific-notes"><code>TB1SRGE</code> specific notes</a></h4>
<p>Calculation of <code>before</code> and <code>after</code> entries for <code>NumberShots</code> metadata field of <code>TB1SRGE</code> is more involved than that of <code>MP2RAGE</code>.
The formula can be found in a
<a href="https://github.com/JosePMarques/MP2RAGE-related-scripts/blob/a405df30ac2c617d29d8b1b16025aaa911e86370/DemoForR1Correction.m#L17">reference implementation</a>,
which requires information about <code>BaseResolution</code> (that is, image matrix size in PE direction),
partial Fourier fraction in the PE direction, number of reference lines for parallel imaging acceleration,
and the parallel imaging acceleration factor in PE direction.</p>
<h3 id="radiofrequency-rf-field-mapping"><a class="toclink" href="#radiofrequency-rf-field-mapping">Radiofrequency (RF) field mapping</a></h3>
<p>Some RF file collections call for the use of special notations that cannot be resolved by
by entities that can generalize to other applications.
Instead of introducing an entity that is exclusive to a single application,
method developers who commonly use these file collections for the <code>MPM</code> application reached
the consensus on the use of <code>acq</code> entity to distinguish individual files.
These suffixes include: <code>TB1AFI</code>, <code>TB1TFL</code>, <code>TB1RFM</code>, and <code>RB1COR</code>.</p>
<h4 id="tb1epi-specific-notes"><a class="toclink" href="#tb1epi-specific-notes"><code>TB1EPI</code> specific notes</a></h4>
<p>The <code>flip</code> and <code>echo</code> entities MUST be used to distinguish images with this suffix.
The use of <code>flip</code> follows the default convention. However, this suffix defines a
specific use case for the <code>echo</code> entity:</p>
<table>
<thead>
<tr>
<th><strong><code>echo-1</code></strong></th>
<th><strong><code>echo-2</code></strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Lower <code>EchoTime</code></td>
<td>Higher <code>EchoTime</code></td>
</tr>
<tr>
<td>Spin Echo (SE) image</td>
<td>Stimulated Echo (STE) image</td>
</tr>
</tbody>
</table>
<p>At each <code>FlipAngle</code>, the <code>TB1EPI</code> suffix lists two images acquired at two echo times.
The first echo is a spin echo (SE) formed by the pulses alpha-2alpha. However, the
second echo in this method is generated in a different fashion compared to a typical
MESE acquisition. The second echo is a stimulated echo (STE) that is formed by an
additional alpha pulse (that is, alpha-2alpha-alpha).</p>
<p>The <code>FlipAngle</code> value corresponds to the nominal flip angle value of the STE pulse.
The nominal FA value of the SE pulse is twice this value.</p>
<p>Note that the following metadata fields MUST be defined in the accompanying JSON
files:</p>
<table>
<thead>
<tr>
<th><strong>Field name</strong></th>
<th><strong>Definition</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>TotalReadoutTime</code></td>
<td>The effective readout length defined as <code>EffectiveEchoSpacing * PEReconMatrix</code>, with <code>EffectiveEchoSpacing = TrueEchoSpacing / PEacceleration</code></td>
</tr>
<tr>
<td><code>MixingTime</code></td>
<td>Time interval between the SE and STE pulses</td>
</tr>
</tbody>
</table>
<p>To properly identify constituents of this particular method, values of the <code>echo</code>
entity MUST index the images as follows:</p>
<div class="highlight"><pre><span></span><code>└─ sub-01/
   └─ fmap/
      ├─ sub-01_echo-1_flip-1_TB1EPI.nii.gz # SE
      ├─ sub-01_echo-1_flip-1_TB1EPI.json 
      ├─ sub-01_echo-2_flip-1_TB1EPI.nii.gz # STE
      ├─ sub-01_echo-2_flip-1_TB1EPI.json 
      ├─ sub-01_echo-1_flip-2_TB1EPI.nii.gz # SE
      ├─ sub-01_echo-1_flip_2_TB1EPI.json 
      ├─ sub-01_echo-2_flip-2_TB1EPI.nii.gz # STE
      └─ sub-01_echo-2_flip-2_TB1EPI.json 
</code></pre></div>
<h4 id="tb1afi-specific-notes"><a class="toclink" href="#tb1afi-specific-notes"><code>TB1AFI</code> specific notes</a></h4>
<p>This method calculates a B1<sup>+</sup> map from two images acquired at two interleaved excitation repetition times (TR).
Note that there is no entity for the TR that can be used to label the files corresponding to the two
repetition times and the definition of repetition time depends on the modality
(<code>functional</code> or <code>anatomical</code>) in the specification.</p>
<p>Therefore, to properly identify constituents of this particular method,
values of the <code>acq</code> entity SHOULD begin with either <code>tr1</code> (lower TR) or <code>tr2</code> (higher TR)
and MAY be followed by freeform entries:</p>
<table>
<thead>
<tr>
<th><strong>First <code>TR</code></strong></th>
<th><strong>Second <code>TR</code></strong></th>
<th><strong>Use case</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>_acq-tr1</code></td>
<td><code>_acq-tr2</code></td>
<td>Single acquisition</td>
</tr>
<tr>
<td><code>_acq-tr1Test</code></td>
<td><code>_acq-tr2Test</code></td>
<td>Acquisition <code>Test</code></td>
</tr>
<tr>
<td><code>_acq-tr1Retest</code></td>
<td><code>_acq-tr2Retest</code></td>
<td>Acquisition <code>Retest</code></td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code>└─ sub-01/
   └─ fmap/
      ├─ sub-01_acq-tr1_TB1AFI.nii.gz 
      ├─ sub-01_acq-tr1_TB1AFI.json 
      ├─ sub-01_acq-tr2_TB1AFI.nii.gz 
      └─ sub-01_acq-tr2_TB1AFI.json 
</code></pre></div>
<h4 id="tb1tfl-and-tb1rfm-specific-notes"><a class="toclink" href="#tb1tfl-and-tb1rfm-specific-notes"><code>TB1TFL</code> and <code>TB1RFM</code> specific notes</a></h4>
<p>These suffixes describe two outputs generated by Siemens <code>tfl_b1_map</code> and <code>rf_map</code> product sequences, respectively.
Both sequences output two images.
The first image appears like an anatomical image and the second output is a scaled flip angle map.</p>
<p>To properly identify files of this particular file collection,
values of the <code>acq</code> entity SHOULD begin with either <code>anat</code> or <code>famp</code> and MAY be followed by freeform entries:</p>
<table>
<thead>
<tr>
<th><strong>Anatomical (like) image</strong></th>
<th><strong>Scaled flip angle map</strong></th>
<th><strong>Use case</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>_acq-anat</code></td>
<td><code>_acq-famp</code></td>
<td>Single acquisition</td>
</tr>
<tr>
<td><code>_acq-anatTest</code></td>
<td><code>_acq-fampTest</code></td>
<td>Acquisition <code>Test</code></td>
</tr>
<tr>
<td><code>_acq-anatRetest</code></td>
<td><code>_acq-fampRetest</code></td>
<td>Acquisition <code>Retest</code></td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code>└─ sub-01/
   └─ fmap/
      ├─ sub-01_acq-anat_TB1TFL.nii.gz 
      ├─ sub-01_acq-anat_TB1TFL.json 
      ├─ sub-01_acq-famp_TB1TFL.nii.gz 
      └─ sub-01_acq-famp_TB1TFL.json 
</code></pre></div>
<p>The example above applies to the <code>TB1RFM</code> suffix as well.</p>
<h4 id="rb1cor-specific-notes"><a class="toclink" href="#rb1cor-specific-notes"><code>RB1COR</code> specific notes</a></h4>
<p>This method generates a sensitivity map by combining two low resolution images
collected by two transmit coils (the body and the head coil) upon subsequent scans
with identical acquisition parameters.</p>
<p>To properly identify constituents of this particular method, values of the <code>acq</code>
entity SHOULD begin with either <code>body</code> or <code>head</code> and MAY be followed by freeform
entries:</p>
<table>
<thead>
<tr>
<th><strong>Body coil</strong></th>
<th><strong>Head coil</strong></th>
<th><strong>Use case</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>_acq-body</code></td>
<td><code>_acq-head</code></td>
<td>Single acquisition</td>
</tr>
<tr>
<td><code>_acq-bodyMTw</code></td>
<td><code>_acq-headMTw</code></td>
<td><code>MTw</code> for <code>MPM</code></td>
</tr>
<tr>
<td><code>_acq-bodyPDw</code></td>
<td><code>_acq-headPDw</code></td>
<td><code>PDw</code> for <code>MPM</code></td>
</tr>
<tr>
<td><code>_acq-bodyT1w</code></td>
<td><code>_acq-headT1w</code></td>
<td><code>T1w</code> for <code>MPM</code></td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code>└─ sub-01/
   └─ fmap/
      ├─ sub-01_acq-body_RB1COR.nii.gz # Body coil
      ├─ sub-01_acq-body_RB1COR.json 
      ├─ sub-01_acq-head_RB1COR.nii.gz # Head coil
      └─ sub-01_acq-head_RB1COR.json 
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        <!--
  Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--><!-- Application footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page --><div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">

        <!-- Link to previous page --><a href="10-file-collections.html"
              title="File collections"
              class="md-flex md-footer-nav__link md-footer-nav__link--prev"
              rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back
                    md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch
                  md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">Previous</span>File collections</span>
            </div>
          </a><!-- Link to next page --><a href="12-arterial-spin-labeling.html"
              title="Arterial Spin Labeling"
              class="md-flex md-footer-nav__link md-footer-nav__link--next"
              rel="next">
            <div class="md-flex__cell md-flex__cell--stretch
                  md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">Next</span>Arterial Spin Labeling</span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward
                    md-footer-nav__button"></i>
            </div>
          </a></nav>
    </div><!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">

      <!-- Copyright and theme information -->
      <div class="md-footer-copyright">See the source code and discussion page on
        <a href="https://github.com/bids-standard/bids-specification">GitHub</a>
      </div>

      <!-- Social links --></div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.94ec81fe.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.48dfec6c.min.js"></script>
      
        <script src="../js/jquery-3.6.0.min.js"></script>
      
    
  </body>
</html>